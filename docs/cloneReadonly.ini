id = "cloneReadonly";
title = "Can Clone Readonly Properties";
description = "Readonly properties may be changed, both at constructor and cloning time, since PHP 8.3. Until then, once set, they could never be changed.";
code = "<?php

class X {
	readonly int $property;
	readonly A $property2;
	
	function __construct(int $p) {
		$this->property = $p;
		$this->property2 = new A($p);
	}
	
	function __clone() {
		$this->property++; // clone used to change scalar
		$this->property2 = new A($this->property); // clone used to change object
	}
}

$x = new X;
$y = clone $x;

var_dump($y);

?>";
before = "PHP Fatal error:  Uncaught Error: Cannot modify readonly property x::$p

Fatal error: Uncaught Error: Cannot modify readonly property x::$p
";
after = "object(x)#2 (1) {
  [\"p\"]=>
  int(3)
}
";
seeAlso[] = "";
deprecation = "";
phpVersion = "8.3";
alternatives[] = "Upgrade to a more recent PHP version to modify readonly during clone.";
alternatives[] = "Drop the readonly option.";
alternatives[] = "Do not modify the readonly property during clone.";
related[] = "";
phpError = "Cannot modify readonly property x::$p";
keywords[] = "transitory";
phpError["Cannot modify readonly property %s::$%s"] = "cannot-modify-readonly-property-%s::$%s"
analyzer[] = "";
features[] = "readonly"
features[] = "clone"
analyzer[] = "Classes/CanCloneReadonly"
