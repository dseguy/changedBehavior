id = "toStringCanThrow";
title = "__toString Can Throw Exceptions";
description = "Until PHP 7.4, the magic method ``__toString()`` could not throw exception, in case of problem occurring during processing. 

Since PHP 7.4, it is possible.";
code = "<?php

class X {
    function __toString() {
        throw new \Exception('error'.__METHOD__);
    }
}

(string) new X;

?>";
before = "PHP Fatal error:  Method X::__toString() must not throw an exception, caught Exception: errorX::__toString

Fatal error: Method X::__toString() must not throw an exception, caught Exception: errorX::__toString
";
after = "PHP Fatal error:  Uncaught Exception: errorX::__toString

Fatal error: Uncaught Exception: errorX::__toString
";
seeAlso[] = "";
deprecation = "";
phpVersion = "7.4";
alternatives[] = "Upgrade to PHP version 7.4 or more recent.";
alternatives[] = "Store the error in the object, and test it again later.";
related[] = "";
keywords[] = "";
features[] = "exception"
features[] = "__toString"
analyzer[] = "Structures/toStringThrowsException"
phpError["Method %s::%s() must not throw an exception, caught %s"] = "method-%s::__tostring()-must-not-throw-an-exception,-caught-%s:-%s"