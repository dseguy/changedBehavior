id = "indirectModificationInClone";
title = "Indirect Modification In Clone";
description = "__clone is used to apply modifications during the cloning operation. It could also be used to change the original object.";
code = "<?php

class X {
    readonly public int $p;
    
    function foo() {
        $this->p = 2;
    }
    
    function __clone() {
        $ref = &$this->p;
    }
}

$x = new x;
clone $x;";
before = "PHP Parse error:  syntax error, unexpected identifier \"readonly\", expecting \"function\" or \"const\" 

Parse error: syntax error, unexpected identifier \"readonly\", expecting \"function\" or \"const\" 
";
after = "PHP Fatal error:  Uncaught Error: Cannot indirectly modify readonly property X::$p

Fatal error: Uncaught Error: Cannot indirectly modify readonly property X::$p
";
seeAlso[] = "";
deprecation = "";
phpVersion = "8.1";
alternatives[] = "Do not change the original object in __clone()";
related[] = "";
keywords[] = "";
features[] = "clone";
features[] = "__clone";
features[] = "reference";
phpError[] = "";